for(var g=1/3,i=-1/6,l=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],m=[],p=0;512>p;p++)m[p]=~~(256*Math.random());function q(f,j){var k=0.6-f[0]*f[0]-f[1]*f[1]-f[2]*f[2];return 0>k?0:Math.pow(k,4)*(f[0]*j[0]+f[1]*j[1]+f[2]*j[2])}c.style.cssText="position: absolute; left: 0; top: 0";var r=c.width=window.innerWidth,u=c.height=window.innerHeight,v=a.createImageData(r,u),w,x=0;a.font="400px Arial";a.fillText("\u2665",r/2-150,u/2+150);
w=a.getImageData(0,0,r,u);
function z(){for(var f=0;f<r;f++)for(var j=0;j<u;j++){var k=4*(f+j*r),y=w.data[k+3];if(y){var d=0.01*f,n=0.01*j,o=0.02*x,h=(d+n+o)*g,b=[d+h,n+h,o+h],b=[~~b[0],~~b[1],~~b[2]],h=(b[0]+b[1]+b[2])*i,h=[b[0]+h,b[1]+h,b[2]+h],d=[d-h[0],n-h[1],o-h[2]],e;e=d[0]>=d[1]?d[1]>=d[2]?[[1,0,0],[1,1,0]]:d[0]>=d[2]?[[1,0,0],[1,0,1]]:[[0,0,1],[1,0,1]]:d[1]<d[2]?[[0,0,1],[0,1,1]]:d[0]<d[2]?[[0,1,0],[0,1,1]]:[[0,1,0],[1,1,0]];var n=d[0]-e[0][0]-i,o=d[1]-e[0][1]-i,h=d[2]-e[0][2]-i,A=d[0]-e[1][0]-2*i,B=d[1]-e[1][1]-2*
i,C=d[2]-e[1][2]-2*i,D=d[0]-1-3*i,E=d[1]-1-3*i,F=d[2]-1-3*i,s=b[0]%255,t=b[1]%255,b=b[2]%255,b=[l[m[s+m[t+m[b]]]%12],l[m[s+e[0][0]+m[t+e[0][1]+m[b+e[0][2]]]]%12],l[m[s+e[1][0]+m[t+e[1][1]+m[b+e[1][2]]]]%12],l[m[s+1+m[t+1+m[b+1]]]%12]];e=0;e+=q(d,b[0]);e+=q([n,o,h],b[1]);e+=q([A,B,C],b[2]);e+=q([D,E,F],b[3]);b=0.7*y*(32*e+1)}v.data[k]=b;v.data[k+1]=v.data[k+2]=0;v.data[k+3]=255}a.putImageData(v,0,0);x++;setTimeout(z,0)}z();
