for(var g=1/3,i=-1/6,l=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],m=l.length,n=[],q=0;512>q;q++)n[q]=~~(256*Math.random());function r(f,j){var k=0.6-f[0]*f[0]-f[1]*f[1]-f[2]*f[2];return 0>k?0:Math.pow(k,4)*(f[0]*j[0]+f[1]*j[1]+f[2]*j[2])}c.style.cssText="position: absolute; left: 0; top: 0";var s=c.width=window.innerWidth,v=c.height=window.innerHeight,w=a.createImageData(s,v),x,y=0;a.font="400px Arial";
a.fillText("\u2665",s/2-150,v/2+150);x=a.getImageData(0,0,s,v);
function A(){for(var f=0;f<s;f++)for(var j=0;j<v;j++){var k=4*(f+j*s),z=x.data[k+3];if(z){var d=0.01*f,o=0.01*j,p=0.02*y,h=(d+o+p)*g,b=[d+h,o+h,p+h],b=[~~b[0],~~b[1],~~b[2]],h=(b[0]+b[1]+b[2])*i,h=[b[0]+h,b[1]+h,b[2]+h],d=[d-h[0],o-h[1],p-h[2]],e;e=d[0]>=d[1]?d[1]>=d[2]?[[1,0,0],[1,1,0]]:d[0]>=d[2]?[[1,0,0],[1,0,1]]:[[0,0,1],[1,0,1]]:d[1]<d[2]?[[0,0,1],[0,1,1]]:d[0]<d[2]?[[0,1,0],[0,1,1]]:[[0,1,0],[1,1,0]];var o=d[0]-e[0][0]-i,p=d[1]-e[0][1]-i,h=d[2]-e[0][2]-i,B=d[0]-e[1][0]-2*i,C=d[1]-e[1][1]-2*
i,D=d[2]-e[1][2]-2*i,E=d[0]-1-3*i,F=d[1]-1-3*i,G=d[2]-1-3*i,t=b[0]%255,u=b[1]%255,b=b[2]%255,b=[l[n[t+n[u+n[b]]]%12%m],l[n[t+e[0][0]+n[u+e[0][1]+n[b+e[0][2]]]]%12%m],l[n[t+e[1][0]+n[u+e[1][1]+n[b+e[1][2]]]]%12%m],l[n[t+1+n[u+1+n[b+1]]]%12%m]];e=0;e+=r(d,b[0]);e+=r([o,p,h],b[1]);e+=r([B,C,D],b[2]);e+=r([E,F,G],b[3]);b=0.7*z*(32*e+1)}w.data[k]=b;w.data[k+1]=w.data[k+2]=0;w.data[k+3]=255}a.putImageData(w,0,0);y++;setTimeout(A,0)}A();
