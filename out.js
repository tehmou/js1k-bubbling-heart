for(var g=1/3,i=-1/6,p=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],q=[],s=0;512>s;s++)q[s]=~~(256*Math.random());function t(f,k){var l=0.6-f[0]*f[0]-f[1]*f[1]-f[2]*f[2];return 0>l?0:Math.pow(l,4)*(f[0]*k[0]+f[1]*k[1]+f[2]*k[2])}c.style.cssText="position: absolute; left: 0; top: 0";var u=c.width=window.innerWidth,v=c.height=window.innerHeight,w=a.createImageData(u,v),x,y=0;a.font="400px Arial";a.fillText("\u2665",u/2-150,v/2+150);
x=a.getImageData(0,0,u,v);
function A(){for(var f=0;f<u;f++)for(var k=0;k<v;k++){var l=4*(f+k*u),z=x.data[l+3];if(z)var h=0.01*f,d=0.01*k,r=0.02*y,j=(h+d+r)*g,m=~~(h+j),b=~~(d+j),e=~~(r+j),j=(m+b+e)*i,h=h-(m+j),o=d-(b+j),n=r-(e+j),d=h>=o?o>=n?[[1,0,0],[1,1,0]]:h>=n?[[1,0,0],[1,0,1]]:[[0,0,1],[1,0,1]]:o<n?[[0,0,1],[0,1,1]]:h<n?[[0,1,0],[0,1,1]]:[[0,1,0],[1,1,0]],r=[h-d[0][0]-i,o-d[0][1]-i,n-d[0][2]-i],j=[h-d[1][0]-2*i,o-d[1][1]-2*i,n-d[1][2]-2*i],h=[h-1-3*i,o-1-3*i,n-1-3*i],m=m%255,b=b%255,e=e%255,e=[p[q[m+q[b+q[e]]]%12],p[q[m+
d[0][0]+q[b+d[0][1]+q[e+d[0][2]]]]%12],p[q[m+d[1][0]+q[b+d[1][1]+q[e+d[1][2]]]]%12],p[q[m+1+q[b+1+q[e+1]]]%12]],b=0,b=b+t(pixDeltaFromOrigin,e[0]),b=b+t(r,e[1]),b=b+t(j,e[2]),b=b+t(h,e[3]),e=0.7*z*(32*b+1);w.data[l]=e;w.data[l+1]=w.data[l+2]=0;w.data[l+3]=255}a.putImageData(w,0,0);y++;setTimeout(A,0)}A();
