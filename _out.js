function g(e,i){var h=(e[0]+e[1]+e[2])*i;return[e[0]+h,e[1]+h,e[2]+h]}for(var j=1/3,k=-1/6,m=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],n=m.length,o=[],q=0;512>q;q++)o[q]=~~(256*Math.random());function r(e,i){var h=0.6-(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return 0>h?0:Math.pow(h,4)*(e[0]*i[0]+e[1]*i[1]+e[2]*i[2])}c.style.cssText="position: absolute; left: 0; top: 0";
var w=c.width=window.innerWidth,x=c.height=window.innerHeight,y=a.createImageData(w,x),z,A=0;a.fillRect(0,0,w,x);a.font="400px Arial";a.fillStyle="#fff";a.fillText("\u2665",w/2-150,x/2+150);z=a.getImageData(0,0,w,x);
function B(){for(var e=0;e<w;e++)for(var i=0;i<x;i++){var h=4*(e+i*w),l=z.data[h];if(l){if(l)var b=0.01*e,s=0.01*i,t=0.02*A,f=g([b,s,t],j),f=[~~f[0],~~f[1],~~f[2]],p=g(f,k),b=[b-p[0],s-p[1],t-p[2]],d=b[0]>=b[1]?b[1]>=b[2]?[[1,0,0],[1,1,0]]:b[0]>=b[2]?[[1,0,0],[1,0,1]]:[[0,0,1],[1,0,1]]:b[1]<b[2]?[[0,0,1],[0,1,1]]:b[0]<b[2]?[[0,1,0],[0,1,1]]:[[0,1,0],[1,1,0]],s=b[0]-d[0][0]-k,t=b[1]-d[0][1]-k,p=b[2]-d[0][2]-k,C=b[0]-d[1][0]-2*k,D=b[1]-d[1][1]-2*k,E=b[2]-d[1][2]-2*k,F=b[0]-1-3*k,G=b[1]-1-3*k,H=b[2]-
1-3*k,u=f[0]%255,v=f[1]%255,f=f[2]%255,f=[m[o[u+o[v+o[f]]]%12%n],m[o[u+d[0][0]+o[v+d[0][1]+o[f+d[0][2]]]]%12%n],m[o[u+d[1][0]+o[v+d[1][1]+o[f+d[1][2]]]]%12%n],m[o[u+1+o[v+1+o[f+1]]]%12%n]],d=0,d=d+r(b,f[0]),d=d+r([s,t,p],f[1]),d=d+r([C,D,E],f[2]),d=d+r([F,G,H],f[3]),l=0.5*l*(32*d+1);else l=0;f=l}y.data[h]=f;y.data[h+1]=y.data[h+2]=0;y.data[h+3]=255}a.putImageData(y,0,0);A++;setTimeout(B,0)}B();
