for(var g=1/3,j=-1/6,n=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],o=[],r=0;512>r;r++)o[r]=~~(256*Math.random());function s(f,k){var l=0.6-f[0]*f[0]-f[1]*f[1]-f[2]*f[2];return 0>l?0:Math.pow(l,4)*(f[0]*k[0]+f[1]*k[1]+f[2]*k[2])}c.style.cssText="position: absolute; left: 0; top: 0";var t=c.width=window.innerWidth,u=c.height=window.innerHeight,v=a.createImageData(t,u),w,x=0;a.font="400px Arial";a.fillText("\u2665",t/2-150,u/2+150);
w=a.getImageData(0,0,t,u);
function z(){for(var f=0;f<t;f++)for(var k=0;k<u;k++){var l=4*(f+k*t),y=w.data[l+3];if(y){var b=0.01*f,p=0.01*k,q=0.02*x,h=(b+p+q)*g,m=~~(b+h),d=~~(p+h),e=~~(q+h),h=(m+d+e)*j,h=[m+h,d+h,e+h],b=[b-h[0],p-h[1],q-h[2]],i;i=b[0]>=b[1]?b[1]>=b[2]?[[1,0,0],[1,1,0]]:b[0]>=b[2]?[[1,0,0],[1,0,1]]:[[0,0,1],[1,0,1]]:b[1]<b[2]?[[0,0,1],[0,1,1]]:b[0]<b[2]?[[0,1,0],[0,1,1]]:[[0,1,0],[1,1,0]];p=[b[0]-i[0][0]-j,b[1]-i[0][1]-j,b[2]-i[0][2]-j];q=[b[0]-i[1][0]-2*j,b[1]-i[1][1]-2*j,b[2]-i[1][2]-2*j];h=[b[0]-1-3*j,b[1]-
1-3*j,b[2]-1-3*j];m%=255;d%=255;e%=255;e=[n[o[m+o[d+o[e]]]%12],n[o[m+i[0][0]+o[d+i[0][1]+o[e+i[0][2]]]]%12],n[o[m+i[1][0]+o[d+i[1][1]+o[e+i[1][2]]]]%12],n[o[m+1+o[d+1+o[e+1]]]%12]];d=0;d+=s(b,e[0]);d+=s(p,e[1]);d+=s(q,e[2]);d+=s(h,e[3]);e=0.7*y*(32*d+1)}v.data[l]=e;v.data[l+1]=v.data[l+2]=0;v.data[l+3]=255}a.putImageData(v,0,0);x++;setTimeout(z,0)}z();
